<!doctype html><html class="no-js" lang="en" dir="ltr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#15a"><title>AKS Network Policies: The Security Layer Your Cluster Is Missing — Daily DevOps & .NET</title><meta name="description" content="Network segmentation is a fundamental security control for modern Kubernetes environments. AKS supports multiple networking models such as kubenet, Azure …"><meta name="twitter:description" property="og:description" content="Network segmentation is a fundamental security control for modern Kubernetes environments. AKS supports multiple networking models such as kubenet, Azure …"><meta name="author" content="Jendrik Brack"><link rel="icon" href="/logo.svg?v=b9e294dc5c6fa04439c8c803d8e981a9" sizes="any" type="image/svg+xml"><meta name="twitter:title" property="og:title" content="AKS Network Policies: The Security Layer Your Cluster Is Missing — Daily DevOps & .NET"><meta property="og:updated_time" content="2025-12-31T06:45:26+01:00"><meta property="article:modified_time" content="2025-12-31T06:45:26+01:00"><meta property="article:published_time" content="2025-12-10T11:45:00+01:00"><meta property="og:type" content="article"><meta property="og:site_name" content="Daily DevOps & .NET"><meta property="og:url" content="https://daily-devops.net/posts/aks-network-policies-zero-trust/"><meta property="og:locale" content="en_US"><meta name="twitter:card" content="summary_large_image"><meta property="og:image" name="twitter:image" content="https://daily-devops.net/images/azure-aks-networking-1200x630.webp?v=9971c594dac6659ca8e5c86c1483ae8f"><meta property="og:image:secure_url" content="https://daily-devops.net/images/azure-aks-networking-1200x630.webp?v=9971c594dac6659ca8e5c86c1483ae8f"><meta property="og:image:alt" name="twitter:image:alt" content="AKS Network Policies: The Security Layer Your Cluster Is Missing"><meta property="og:image:type" content="image/webp"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:image" name="twitter:image" content="https://daily-devops.net/images/azure-aks-networking-1200x630.png?v=2e62b136b74548ab5fc5f15fccee3a35"><meta property="og:image:secure_url" content="https://daily-devops.net/images/azure-aks-networking-1200x630.png?v=2e62b136b74548ab5fc5f15fccee3a35"><meta property="og:image:alt" name="twitter:image:alt" content="AKS Network Policies: The Security Layer Your Cluster Is Missing"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><link rel="dns-prefetch" href="https://www.clarity.ms"><link rel="preconnect" href="https://www.clarity.ms" crossorigin><link rel="stylesheet" href="/css/style.min.0b2ef4378cd908eb695017aaa74603d244ff2b38c8068b4b51d76cad830c8ee5e3a40b67ab5b860a542c8bae73d8ba90cfbe9249b59c733a50de74cc32af818a.css" integrity="sha512-Cy70N4zZCOtpUBeqp0YD0kT/KzjIBotLUddsrYMMjuXjpAtnq1uGClQsi65z2LqQz76SSbWcczpQ3nTMMq+Big==" crossorigin="anonymous"><link rel="alternate" href='https://daily-devops.net/posts/aks-network-policies-zero-trust/' hreflang="x-default" title="AKS Network Policies: The Security Layer Your Cluster Is Missing &mdash; Daily DevOps & .NET"><link rel="canonical" href="https://daily-devops.net/posts/aks-network-policies-zero-trust/" hreflang="en-us" title="AKS Network Policies: The Security Layer Your Cluster Is Missing &mdash; Daily DevOps & .NET"><link rel="home" href="https://daily-devops.net/" hreflang="en-us" title="Daily DevOps & .NET"><link rel="next" href="https://daily-devops.net/posts/dotnet-power-of-ten-rules/" hreflang="en-us" title="Power of Ten Rules: More Relevant Than Ever for .NET"><link rel="prev" href="https://daily-devops.net/posts/dotnet-job-scheduling-5-ncronjob/" hreflang="en-us" title=".NET Job Scheduling — NCronJob and Native Minimalism"><link rel="author" href="https://daily-devops.net/authors/jendrik/" hreflang="en-us" title="Jendrik Brack &mdash; Daily DevOps & .NET"><meta name="giscus:backlink" content="https://daily-devops.net/posts/aks-network-policies-zero-trust/"><script defer src="/js/above.min.cb42b2c9a453e49e278326637d72d2f01e7f32e3f91e9cdde8fb587793d05514efd2f5cc5021c9658ca0f73876dbdcd1f7cb4a37c0bebc9df01110926b6d7cba.js" integrity="sha512-y0KyyaRT5J4ngyZjfXLS8B5/MuP5Hpzd6PtYd5PQVRTv0vXMUCHJZYyg9zh229zR98tKN8C+vJ3wERCSa218ug==" crossorigin="anonymous"></script><script type="text/javascript">(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","o0pr4n9gg3")</script></head><body class="container"><header class="header"><a class="logo" href="/" title="Daily DevOps & .NET" rel="home"><figure class="page-logo"><picture><img src="/logo.svg?v=b9e294dc5c6fa04439c8c803d8e981a9" alt="Daily DevOps & .NET" title="Daily DevOps & .NET"></picture></figure><span class="title">Daily DevOps & .NET</span></a><nav class="menu"><button class="burger" aria-haspopup="true" aria-expanded="false" tabindex="0">
<i class="fas fa-burger"></i></button><ul class="navigation"><li class="active"><a href="/posts/">Posts</a></li><li><a href="/authors/">About us</a></li></ul></nav><div class="divider"></div></header><main class="body"><figure class="hero"><picture><source srcset="/images/azure-aks-networking-544x136.webp?v=088471c50a91bc4f9995500e3f004a37" type="image/webp" media="(max-width: 575.98px)"><source srcset="/images/azure-aks-networking-544x136.png?v=fe092e5a62ae4c042edb803b090c5989" type="image/png" media="(max-width: 575.98px)"><source srcset="/images/azure-aks-networking-672x168.webp?v=6a89819365e7faeefcbeb40115bbd091" type="image/webp" media="(max-width: 767.98px)"><source srcset="/images/azure-aks-networking-672x168.png?v=b56c6afad8762d4b5ed5cfa94fcda04b" type="image/png" media="(max-width: 767.98px)"><source srcset="/images/azure-aks-networking-896x224.webp?v=5ba8481cdc2131eb393e6223228b7060" type="image/webp" media="(max-width: 991.98px)"><source srcset="/images/azure-aks-networking-896x224.png?v=d3373b9ff00fd73e34c03bb616e6ebc8" type="image/png" media="(max-width: 991.98px)"><source srcset="/images/azure-aks-networking-1104x276.webp?v=9794b6fd24d2ba5ca2ffc1b208347e32" type="image/webp" media="(max-width: 1199.98px)"><source srcset="/images/azure-aks-networking-1104x276.png?v=5c379296c3b8d00855590e0679541241" type="image/png" media="(max-width: 1199.98px)"><source srcset="/images/azure-aks-networking-1444x361.webp?v=94d8efc902a4fa2a851f65ccb5653750" type="image/webp"><source srcset="/images/azure-aks-networking-1444x361.png?v=c946805736caeb8c51bc24ff0c07098b" type="image/png"><img src="/images/azure-aks-networking.png?v=18bd7f57024c4453f7415c91251112a9" alt="AKS Network Policies: The Security Layer Your Cluster Is Missing" loading="lazy" decoding="async" title="AKS Network Policies: The Security Layer Your Cluster Is Missing"></picture></figure><article class="post"><header><h1>AKS Network Policies: The Security Layer Your Cluster Is Missing</h1></header><section class="content"><p>Network segmentation is a fundamental security control for modern Kubernetes environments. AKS supports multiple networking models such as kubenet, Azure CNI, and overlay CNIs. The networking model matters, but the decisive factor for enforcing isolation and compliance is the consistent application of network policies.</p><p>This article describes how network policies work in AKS, the available engines, practical examples, and recommended practices for enforcing a zero-trust posture within a cluster.</p><h2 id="why-network-policies-matter"><a href="/posts/aks-network-policies-zero-trust/#why-network-policies-matter" title="Why network policies matter">Why network policies matter</a></h2><p>Kubernetes permissively allows pod-to-pod communication by default, which simplifies operations but increases risk. Without network policies, an attacker or a compromised workload can move laterally, access internal services, exfiltrate data, or generate unintended traffic. Network policies let you express explicit allow rules, reducing the cluster attack surface and supporting compliance requirements.</p><h2 id="aks-network-policy-engines"><a href="/posts/aks-network-policies-zero-trust/#aks-network-policy-engines" title="AKS network policy engines">AKS network policy engines</a></h2><p>AKS offers two commonly used network policy implementations. Choose based on feature needs and operational constraints.</p><p>AKS also supports Cilium as a network policy and dataplane option. Evaluate Cilium if you require advanced eBPF-based dataplane features or different dataplane capabilities (see Microsoft Docs).</p><h3 id="azure-network-policies"><a href="/posts/aks-network-policies-zero-trust/#azure-network-policies" title="Azure Network Policies">Azure Network Policies</a></h3><ul><li>Native AKS integration.</li><li>Requires Azure CNI (see Microsoft Docs: Use network policies in AKS).</li><li>High performance and deep integration with Azure networking.</li><li>Policies are enforced by Azure&rsquo;s policy manager.</li><li>Best suited for organizations that prefer a managed, Azure-native solution.</li></ul><h3 id="calico-network-policies"><a href="/posts/aks-network-policies-zero-trust/#calico-network-policies" title="Calico Network Policies">Calico Network Policies</a></h3><ul><li>Open-source and widely adopted.</li><li>Supports advanced features such as egress controls and global policies.</li><li>Works with Azure CNI and kubenet (see Microsoft Docs: Use network policies in AKS).</li><li>Suitable for complex architectures, multi-cloud deployments, or teams that need granular L3/L4 controls.</li></ul><h2 id="how-network-policies-work"><a href="/posts/aks-network-policies-zero-trust/#how-network-policies-work" title="How network policies work">How network policies work</a></h2><p>Network policies declare allowed traffic in terms of pod selectors, namespace selectors, ports, and protocol. A policy can specify ingress rules, egress rules, or both. Importantly, once any policy selects a pod, the implicit behavior becomes deny for traffic not explicitly allowed. That default-deny behavior is the basis for predictable and auditable isolation.</p><p>Note: Network policy is commonly set at cluster creation (for example: <code>az aks create --network-plugin azure --network-policy azure</code>). You can enable or change the network policy engine on an existing cluster (for example: <code>az aks update --resource-group myRG --name myAKSCluster --network-policy calico</code>). However, changing the network policy can trigger node-pool reimaging and temporary disruption.</p><p>Practical maintenance steps when changing network policies:</p><ul><li>Test the change in a staging cluster first. Example create command for a disposable test cluster:</li></ul><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">az aks create -g myRG -n test-cluster --network-plugin azure --network-policy calico --node-count <span class="m">1</span>
</span></span></code></pre></div><ul><li>When rolling changes through production, update one node pool at a time and verify workloads before proceeding.</li><li>Before making changes, cordon and drain affected nodes to allow graceful eviction:</li></ul><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl cordon &lt;node-name&gt;
</span></span><span class="line"><span class="cl">kubectl drain &lt;node-name&gt; --ignore-daemonsets --delete-local-data
</span></span></code></pre></div><ul><li>After the update, validate workloads and then uncordon nodes: <code>kubectl uncordon &lt;node-name></code>.</li></ul><p>Plan a maintenance window for these operations and automate the rollback or node-pool recreation path if validation fails.</p><p>Note: Kubernetes NetworkPolicy is an L3/L4 mechanism. It controls IP and port level access between pods and namespaces. For L7 (HTTP/FQDN) filtering you need an engine that explicitly supports L7 policies (for example, Cilium&rsquo;s L7 features) or a service-mesh / proxy-based approach.</p><h2 id="practical-example-allow-only-specific-traffic"><a href="/posts/aks-network-policies-zero-trust/#practical-example-allow-only-specific-traffic" title="Practical example: Allow only specific traffic">Practical example: Allow only specific traffic</a></h2><p>This policy allows only requests from pods labeled role=app to pods labeled role=backend on TCP port 8080 in the production namespace.</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">networking.k8s.io/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">NetworkPolicy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">allow-app-to-backend</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">production</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">podSelector</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l">backend</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ingress</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">from</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">podSelector</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l">app</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span></code></pre></div><p>Without other allow rules, all other traffic to the selected backend pods will be blocked. This approach supports a least-privilege model for intra-cluster communication.</p><h2 id="how-to-validate-policies"><a href="/posts/aks-network-policies-zero-trust/#how-to-validate-policies" title="How to validate policies">How to validate policies</a></h2><p>Quick validation steps you can run in a test cluster:</p><ol><li>Create a small test cluster with Calico enabled:</li></ol><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">az aks create -g myRG -n test-calico --network-plugin azure --network-policy calico --node-count <span class="m">1</span>
</span></span></code></pre></div><ol start="2"><li>Deploy two lightweight pods and verify connectivity:</li></ol><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl run client --image<span class="o">=</span>busybox --restart<span class="o">=</span>Never -- sleep <span class="m">3600</span>
</span></span><span class="line"><span class="cl">kubectl run server --image<span class="o">=</span>busybox --restart<span class="o">=</span>Never -- sleep <span class="m">3600</span>
</span></span><span class="line"><span class="cl">kubectl get pods -o wide
</span></span><span class="line"><span class="cl">kubectl <span class="nb">exec</span> -it client -- /bin/sh
</span></span><span class="line"><span class="cl"><span class="c1"># from inside the client pod try to reach the server pod IP (replace &lt;server-pod-ip&gt;):</span>
</span></span><span class="line"><span class="cl">nc -zv &lt;server-pod-ip&gt; <span class="m">8080</span>
</span></span></code></pre></div><ol start="3"><li>Apply your NetworkPolicy and repeat the test. Use <code>kubectl describe networkpolicy &lt;name></code> to inspect selectors and rules.</li></ol><p>These steps are intended for validation only. Do not run them against production clusters.</p><p>CI validation snippet (example):</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># apply policy and run quick connectivity check</span>
</span></span><span class="line"><span class="cl">kubectl apply -f mypolicy.yaml
</span></span><span class="line"><span class="cl">kubectl run client --image<span class="o">=</span>busybox --restart<span class="o">=</span>Never -- sleep <span class="m">3600</span>
</span></span><span class="line"><span class="cl">kubectl run server --image<span class="o">=</span>busybox --restart<span class="o">=</span>Never -- sleep <span class="m">3600</span>
</span></span><span class="line"><span class="cl"><span class="nv">SERVER_IP</span><span class="o">=</span><span class="k">$(</span>kubectl get pod -l <span class="nv">run</span><span class="o">=</span>server -o <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.items[0].status.podIP}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">kubectl <span class="nb">exec</span> client -- nc -zv <span class="nv">$SERVER_IP</span> <span class="m">8080</span> <span class="o">||</span> <span class="nb">exit</span> <span class="m">1</span>
</span></span></code></pre></div><p>CI security guidance:</p><ul><li>Prefer ephemeral test clusters created by the pipeline and destroyed after the run. If that is not possible, create a Kubernetes ServiceAccount with minimal RBAC instead of storing a full-cluster admin <code>KUBECONFIG</code> in secrets.</li><li>Use a least-privilege service principal or OIDC-based login for Azure authentication and scope credentials to the smallest resource group or cluster role necessary. Avoid exposing long-lived admin credentials in CI secrets.</li></ul><h2 id="namespace-isolation"><a href="/posts/aks-network-policies-zero-trust/#namespace-isolation" title="Namespace isolation">Namespace isolation</a></h2><p>Namespaces help organize workloads but do not enforce network isolation by themselves. Apply a policy that denies ingress to all pods unless explicitly allowed to implement namespace-level segmentation.</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">networking.k8s.io/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">NetworkPolicy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">deny-cross-namespace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">podSelector</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ingress</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span></span></span></code></pre></div><h2 id="egress-control"><a href="/posts/aks-network-policies-zero-trust/#egress-control" title="Egress control">Egress control</a></h2><p>Outbound traffic is often overlooked, yet many compromises involve unfiltered egress. Use egress policies to permit only required external destinations. Example: allow DNS to a specific resolver.</p><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">networking.k8s.io/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">NetworkPolicy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">allow-egress-dns</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">podSelector</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">policyTypes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">Egress</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">egress</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">to</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">ipBlock</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">cidr</span><span class="p">:</span><span class="w"> </span><span class="m">8.8.8.8</span><span class="l">/32</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">UDP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">53</span><span class="w">
</span></span></span></code></pre></div><h2 id="choosing-the-right-engine"><a href="/posts/aks-network-policies-zero-trust/#choosing-the-right-engine" title="Choosing the right engine">Choosing the right engine</a></h2><p>Feature comparison at a glance:</p><table class="striped"><thead><tr><th>Feature</th><th style="text-align:right">Azure Network Policies</th><th style="text-align:right">Calico</th><th style="text-align:right">Cilium</th></tr></thead><tbody><tr><td>AKS integration</td><td style="text-align:right">Very good</td><td style="text-align:right">Good</td><td style="text-align:right">Good</td></tr><tr><td>Performance</td><td style="text-align:right">High</td><td style="text-align:right">High</td><td style="text-align:right">High</td></tr><tr><td>Complexity</td><td style="text-align:right">Low</td><td style="text-align:right">Medium</td><td style="text-align:right">Medium</td></tr><tr><td>Advanced egress</td><td style="text-align:right">No</td><td style="text-align:right">Yes</td><td style="text-align:right">Yes</td></tr><tr><td>Global policies</td><td style="text-align:right">No</td><td style="text-align:right">Yes</td><td style="text-align:right">Yes</td></tr><tr><td>Multi-cloud support</td><td style="text-align:right">No</td><td style="text-align:right">Yes</td><td style="text-align:right">Yes</td></tr></tbody></table><p>Note on Cilium: Cilium provides an eBPF-based dataplane and supports advanced L7 features and cluster/global policy CRDs. Many of Cilium&rsquo;s advanced capabilities rely on Linux eBPF support; feature parity on Windows nodes is limited. Check the AKS Cilium and Cilium docs for supported scenarios and any AKS-specific integration steps.</p><p>Recommendation: use Azure Network Policies if you need a managed Azure-native solution and do not require advanced Calico features. Choose Calico if you need advanced egress controls, global policies, or multi-cloud consistency.</p><h2 id="best-practices"><a href="/posts/aks-network-policies-zero-trust/#best-practices" title="Best practices">Best practices</a></h2><ul><li>Start with a default-deny posture. Block traffic first, then explicitly allow required flows.</li><li>Organize policies per namespace to simplify governance and reduce accidental exposure.</li><li>Version and test policies as part of CI pipelines. Tools such as Kyverno or Gatekeeper help validate and enforce policy changes before they reach production.</li><li>Instrument and visualize traffic flows using Azure Monitor, Calico UI, or third-party observability tools. Visibility is critical for troubleshooting and verification.</li><li>Combine network policies with Pod Security Standards to protect workloads and reduce risk at multiple layers.</li></ul><p>Author tip: Test policy changes in a disposable staging cluster and automate policy validation in CI pipelines. This reduces surprises during production rollouts and helps detect overly broad or blocking rules early.</p><p>Author note: I will be honest, when I first started working with AKS network policies I found the default behaviour a bit surprising — and you probably will too. So, a pretty simple rule of thumb I use is: start small, test often, and iterate. If you take nothing else from this article, just run the validation steps in a throwaway cluster and you&rsquo;ll learn quickly what gets blocked and what does not.</p><p>Known limitations and version notes</p><ul><li>Windows node support and feature parity can differ from Linux; check the AKS Windows guidance for details. (See Microsoft Docs.)</li><li>Some advanced Calico features may require specific Calico versions; refer to the Calico and AKS release notes before adopting L7 or global policy features.</li></ul><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Validate NetworkPolicy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">push]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">jobs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">validate-policy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Checkout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/checkout@v4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Set up kubectl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">azure/setup-kubectl@v3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Apply policy and test connectivity</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">env</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">KUBECONFIG</span><span class="p">:</span><span class="w"> </span><span class="l">${{ secrets.KUBECONFIG }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          kubectl apply -f mypolicy.yaml
</span></span></span><span class="line"><span class="cl"><span class="sd">          kubectl run client --image=busybox --restart=Never -- sleep 3600
</span></span></span><span class="line"><span class="cl"><span class="sd">          kubectl run server --image=busybox --restart=Never -- sleep 3600
</span></span></span><span class="line"><span class="cl"><span class="sd">          sleep 5
</span></span></span><span class="line"><span class="cl"><span class="sd">          SERVER_IP=$(kubectl get pod -l run=server -o jsonpath=&#39;{.items[0].status.podIP}&#39;)
</span></span></span><span class="line"><span class="cl"><span class="sd">          kubectl exec client -- nc -zv $SERVER_IP 8080 || exit 1</span><span class="w">
</span></span></span></code></pre></div><p>A few quick, honestly practical pointers: name your test namespace <code>np-test</code>, use labels like <code>app=demo</code> and <code>role=backend</code>, and store <code>KUBECONFIG</code> in your CI secrets. These tiny, somewhat mundane conventions make reproducible tests a lot easier.</p><h2 id="conclusion"><a href="/posts/aks-network-policies-zero-trust/#conclusion" title="Conclusion">Conclusion</a></h2><p>Network policies are a foundational control for securing AKS clusters. They enable a zero-trust approach inside the cluster, reduce the attack surface, separate workloads, and allow precise control of inbound and outbound traffic. Whether you adopt Azure Network Policies or Calico, apply policies consistently, automate testing and deployment, and maintain visibility to ensure the cluster remains secure and auditable.</p></section><h2>Comments</h2><aside class="giscus"></aside><script src="https://giscus.app/client.js" data-repo="dailydevops/dailydevops.github.io" data-repo-id="R_kgDOHA8eFg" data-category="Announcements" data-category-id="DIC_kwDOHA8eFs4COIqL" data-mapping="pathname" data-strict="1" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="en" crossorigin="anonymous" async></script></article><aside class="sidebar divider"><section class="sidecar info"><ul><li><time datetime="2025-12-10T11:45:00+01:00">Published on 12/10/25 11:45 am</time></li><li>Read in 7 minutes</li></ul></section><section class="sidecar series"><header><h2>Series content</h2></header><a href="https://daily-devops.net/posts/aks-networking-clash/" title="AKS Networking Clash: kubenet vs. CNI vs. CNI Overlay" target="_blank" rel="noopener external noreferrer"><i class="fas fa-angles-right"></i>&nbsp;
AKS Networking Clash: kubenet vs. CNI vs. CNI Overlay
</a><a href="https://daily-devops.net/posts/aks-network-policies-zero-trust/" title="AKS Network Policies: The Security Layer Your Cluster Is Missing" target="_blank" rel="noopener external noreferrer"><i class="fas fa-angles-right"></i>&nbsp;
AKS Network Policies: The Security Layer Your Cluster Is Missing</a></section><section class="sidecar author"><header><h2><a href="/authors/jendrik/" rel="author" title="Jendrik Brack">Author Jendrik Brack</a></h2></header><figure class="round"><picture><img src="https://www.gravatar.com/avatar/?d=identicon&amp;s=200" alt="Jendrik Brack" loading="lazy" decoding="async" title="Jendrik Brack"></picture></figure><section class="content">DevOps engineer with a systems-administration background; focus on Azure, CI/CD, IaC and pragmatic automation solutions.</section><a class="link" href="/authors/jendrik/" rel="author" title="Jendrik Brack"></a></section><section class="sidecar social"><header><h2>Social media</h2></header><a class="icon linkedin" href="https://www.linkedin.com/in/jendrik-brack" rel="noopener external" title="Follow me on LinkedIn" target="_blank"><span class="fa-stack fa-fw fa-1x"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin-in fa-stack-1x fa-inverse"></i>
</span></a><a class="icon mail" href="mailto:jendrik@daily-devops.net" title="Contact me by e-mail" target="_blank"><span class="fa-stack fa-fw fa-1x"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
</span></a><a class="icon feed" href="/authors/jendrik/feed.rss" title="My RSS feed" target="_blank"><span class="fa-stack fa-fw fa-1x"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></section><section class="sidecar share"><header><h2>Share this content</h2></header><a class="icon linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fdaily-devops.net%2fposts%2faks-network-policies-zero-trust%2f&text=AKS%20Network%20Policies%3a%20The%20Security%20Layer%20Your%20Cluster%20Is%20Missing%20%26mdash%3b%20Daily%20DevOps%20%26%20.NET" target="_blank" rel="noopener external" aria-label="Share on LinkedIn" title="Share on LinkedIn" target="_blank"><i class="fa-brands fa-fw fa-linkedin-in fa-2x"></i></a>
<a class="icon bluesky" href="https://bsky.app/intent/compose?text=AKS%20Network%20Policies%3a%20The%20Security%20Layer%20Your%20Cluster%20Is%20Missing%20%26mdash%3b%20Daily%20DevOps%20%26%20.NET%20https%3a%2f%2fdaily-devops.net%2fposts%2faks-network-policies-zero-trust%2f" target="_blank" rel="noopener external" aria-label="Share on Bluesky" title="Share on Bluesky" target="_blank"><i class="fa-brands fa-fw fa-bluesky fa-2x"></i></a></section><section class="sidecar tags"><header><h2>Tags</h2></header><ul><li class="tag"><a href="/tags/azure/" hreflang="en" rel="tag" title="Azure"><i class="fas fa-tag"></i>&nbsp;Azure</a></li><li class="tag"><a href="/tags/cloud/" hreflang="en" rel="tag" title="Cloud"><i class="fas fa-tag"></i>&nbsp;Cloud</a></li><li class="tag"><a href="/tags/kubernetes/" hreflang="en" rel="tag" title="Kubernetes"><i class="fas fa-tag"></i>&nbsp;Kubernetes</a></li><li class="tag"><a href="/tags/networking/" hreflang="en" rel="tag" title="Networking"><i class="fas fa-tag"></i>&nbsp;Networking</a></li><li class="tag"><a href="/tags/platform-engineering/" hreflang="en" rel="tag" title="Platform Engineering"><i class="fas fa-tag"></i>&nbsp;Platform Engineering</a></li></ul></section><section class="sidecar links"><header><h2>Additional links</h2></header><a href="https://learn.microsoft.com/azure/aks/use-network-policies#create-an-aks-cluster-and-enable-network-policy" title="Create an AKS cluster and enable network policy" target="_blank" rel="noopener external noreferrer"><i class="fas fa-angles-right"></i>&nbsp;
Create an AKS cluster and enable network policy
</a><a href="https://learn.microsoft.com/azure/aks/use-network-policies" title="Use network policies in AKS" target="_blank" rel="noopener external noreferrer"><i class="fas fa-angles-right"></i>&nbsp;
Use network policies in AKS
</a><a href="https://learn.microsoft.com/cli/azure/aks?view=azure-cli-latest" title="az aks CLI reference" target="_blank" rel="noopener external noreferrer"><i class="fas fa-angles-right"></i>&nbsp;
az aks CLI reference
</a><a href="https://learn.microsoft.com/azure/aks/configure-azure-cni" title="Configure Azure CNI" target="_blank" rel="noopener external noreferrer"><i class="fas fa-angles-right"></i>&nbsp;
Configure Azure CNI
</a><a href="https://learn.microsoft.com/azure/cloud-adoption-framework/scenarios/app-platform/aks/network-topology-and-connectivity" title="Network topology and connectivity considerations for AKS" target="_blank" rel="noopener external noreferrer"><i class="fas fa-angles-right"></i>&nbsp;
Network topology and connectivity considerations for AKS
</a><a href="https://www.tigera.io/project-calico/" title="Tigera / Project Calico" target="_blank" rel="noopener external noreferrer"><i class="fas fa-angles-right"></i>&nbsp;
Tigera / Project Calico
</a><a href="https://docs.cilium.io/docs" title="Cilium documentation" target="_blank" rel="noopener external noreferrer"><i class="fas fa-angles-right"></i>&nbsp;
Cilium documentation</a></section><section class="sidecar related"><header><h2>Related content</h2></header><article class="post"><figure class="square"><picture><source srcset="/images/azure-aks-networking-80x80.webp?v=53cb3cbe8e42c40b4742e0504d05f7df" type="image/webp"><source srcset="/images/azure-aks-networking-80x80.png?v=5222a7b18515bd9d3098abe7fbce0d8e" type="image/png"><img src="/images/azure-aks-networking.png?v=18bd7f57024c4453f7415c91251112a9" alt="AKS Networking Clash: kubenet vs. CNI vs. CNI Overlay" loading="lazy" decoding="async" title="AKS Networking Clash: kubenet vs. CNI vs. CNI Overlay"></picture></figure><header><h2><a href="/posts/aks-networking-clash/" rel="bookmark">AKS Networking Clash: kubenet vs. CNI vs. CNI Overlay</a></h2></header><section class="content"><p>Selecting the right network model is arguably one of the most critical architectural decisions you will make when deploying a Kubernetes cluster on Azure Kubernetes Service (AKS). This choice ripples through nearly every aspect of your cluster&rsquo;s lifecycle, influencing how pods communicate, how efficiently you use your IP address space, which Azure services integrate seamlessly with your workloads, and ultimately, how well your infrastructure scales to meet future demands. It affects scalability, security posture, operational cost, performance characteristics, available integration options, and your long-term operational flexibility.</p></section></article><article class="post"><figure class="square"><picture><source srcset="/images/csharp-80x80.webp?v=0f7110ee2851196f14d99463a855759d" type="image/webp"><source srcset="/images/csharp-80x80.png?v=c5d685b0d4fa9ec69bd959ee04beb903" type="image/png"><img src="/images/csharp.png?v=21ff9dcf5d1da7bfa80141c972c117da" alt="Stop Parsing the Same String Twice: CompositeFormat in .NET" loading="lazy" decoding="async" title="Stop Parsing the Same String Twice: CompositeFormat in .NET"></picture></figure><header><h2><a href="/posts/compositeformat-performance-boost/" rel="bookmark">Stop Parsing the Same String Twice: CompositeFormat in .NET</a></h2></header><section class="content">Every time you call <code>string.Format()</code> with the same format string, .NET parses it again. And again. And again. CompositeFormat changes that: parse once, reuse forever. The result? Up to 30% faster formatting, fewer allocations, and a one-line code change. Here&rsquo;s why this matters and how to use it.</section></article><article class="post"><figure class="square"><picture><source srcset="/images/microsoft-learn-80x80.webp?v=aaefd1a370eb1ed297bbc8d2997d1d87" type="image/webp"><source srcset="/images/microsoft-learn-80x80.png?v=7197b306e1a800460ff2859c0ef96616" type="image/png"><img src="/images/microsoft-learn.png?v=80c977bf04b013024a889cb08507fbdc" alt="Reimagining the Microsoft Certification Exam UI Experience" loading="lazy" decoding="async" title="Reimagining the Microsoft Certification Exam UI Experience | Microsoft - https://docs.microsoft.com/en-us/learn/" copyright="Microsoft - https://docs.microsoft.com/en-us/learn/"></picture></figure><header><h2><a href="/posts/reimagining-the-microsoft-certification-exam-ui/" rel="bookmark">Reimagining the Microsoft Certification Exam UI Experience</a></h2></header><section class="content">Embark on a journey through Microsoft&rsquo;s redesigned certification exam UI. Discover streamlined navigation, enhanced accessibility, and personalized experiences, revolutionizing the exam-taking experience.</section></article></section></aside><nav class="pager"><a class="next" href="/posts/dotnet-power-of-ten-rules/" title="Power of Ten Rules: More Relevant Than Ever for .NET" rel="next"><span class="sub"><i class="fas fa-backward"></i>&emsp;Next</span><p class="title">Power of Ten Rules: More Relevant Than Ever for .NET</p></a><a class="prev" href="/posts/dotnet-job-scheduling-5-ncronjob/" title=".NET Job Scheduling — NCronJob and Native Minimalism" rel="prev"><span class="sub">Previous&emsp;<i class="fas fa-forward"></i></span><p class="title">.NET Job Scheduling — NCronJob and Native Minimalism</p></a></nav></main><footer class="footer"><div class="divider"></div><nav><ul class="navigation"><li><a href="/tags/">Tags</a></li><li><a href="/legal-notice/">Legal notice</a></li></ul></nav><div class="copyright">&copy; 2023 - 2025 Daily DevOps & .NET</div></footer><script defer src="/js/below.min.a6ce9164454b6077f17ae856f280442d9f3a1e21f06189f71c21f75144b22a0c8cf32bafd61d440e9d90ca02bf738b6a8ef19f5ec20285d8ca574f98c91ebaf2.js" integrity="sha512-ps6RZEVLYHfxeuhW8oBELZ86HiHwYYn3HCH3UUSyKgyM8yuv1h1EDp2QygK/c4tqjvGfXsIChdjKV0+YyR668g==" crossorigin="anonymous"></script></body></html>